@model EShop.WEB.Models.ChangePasswordViewModel
@{
    Layout = "~/Views/Shared/_Manage.cshtml";
    if (Request.IsAjaxRequest())
    {
        Layout = null;
    }
}
<div id="resss">
    @using (Ajax.BeginForm("ChangePassword", "Manage", null, new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "resss" }, new { @class = "form-horizontal", @id = "change-pass-form" }))
    {

        @Html.AntiForgeryToken()
        <h4>تغيير كلمة المرور</h4>
        <hr />
        @Html.ValidationSummary("", new { @class = "text-danger" })
        <h1>@ViewBag.result</h1>
        <div class="form-group">
            @Html.LabelFor(m => m.OldPassword, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.PasswordFor(m => m.OldPassword, new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(m => m.NewPassword, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.PasswordFor(m => m.NewPassword, new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(m => m.ConfirmPassword, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="حفظ التغييرات" class="btn btn-default" />
            </div>
        </div>
    }
    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    }
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>

    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
    
        @if (ViewBag.result != null && ViewBag.result.ToString() == "true")
        {
            <script>
                generateFlash("success", "OK");
            </script>
        }
        else
        {
            <script>
                generateFlash("error", "NOT OK");
            </script>
        }
</div>
@*<script>

    $("#change-pass-form")
        .on('submit',
            function(event) {
                event.preventDefault();
                $.ajax({
                    type: 'post',
                    data: $(this).serialize(),
                    success: function (data) {
                        console.log(data);
                        //if (!data.Succedeed) {
                           //$("#change-pass-form").html($(data).find("#change-pass-form"));

                        //} else {
                        //    //generateFlash('success', data.Message);
                        //    alert(data.Message);
                        //}
                    }
            });
            });
</script>*@