@model List<EShop.WEB.Models.CartItem>

    <div  class="block sidebar-cart">
        <div class="sidebar-bar-title">
            <h3>سلة الشراء</h3>
        </div>
        <div class="block-content">
            @if (@Model.Count > 0)
            {
                <p class="amount">
                    هنالك <a href="@Url.Action("Browse", "Cart")">@Model.Count أغراض</a> في السلّة الخاصة بك.
                </p>
                <ul>
                    @foreach (var cartItem in @Model)
                    {
                        <li class="item">
                           
                            <a href="@Url.Action("Browse", "Product", new { id = cartItem.Id, SkuId = cartItem.SkuId })" title="Sample Product" class="product-image"><img src="@(cartItem.Images[0]).ashx?height=100" alt="@cartItem.Name"></a>
                            <div class="product-details">
                                <div class="access">
                                    <a href="#" title="Remove This Item" class="remove-cart" id="@cartItem.SkuId-@cartItem.Id"><i class="icon-close"></i></a>
                                </div>
                                <p class="product-name">
                                  
                                    <a href="@Url.Action("Browse", "Product", new { id = cartItem.Id, SkuId = cartItem.SkuId })">@cartItem.Name</a>
                                </p>
                                <strong>@cartItem.Quantity</strong> x <span class="price" style="float: right; direction: rtl;">@cartItem.TotalPriceDisplay</span>
                            </div>
                        </li>
                    }
                    @*<li class="item last">
                        <a href="#" title="Sample Product" class="product-image"><img src="../CategoryBase/images/products/img08.jpg" alt="Sample Product"></a>
                        <div class="product-details">
                            <div class="access">
                                <a href="#" title="Remove This Item" class="remove-cart"><i class="icon-close"></i></a>
                            </div>
                            <p class="product-name">
                                <a href="../CategoryBase/shopping_cart.html">منتج 2</a>
                            </p>
                            <strong>1</strong> x <span class="price">$8.00</span>

                        </div>
                    </li>*@
                </ul>
                <div class="summary">
                    <p class="subtotal"> <span class="label">المجموع الجزئي للسلّة الخاصة بك</span> <span class="price">@ViewBag.TotalDisplay</span> </p>
                </div>
                <div class="cart-checkout">
                    <button class="button button-checkout" title="Submit" onclick="location.href = '@Url.Action("Index","Checkout")'" type="button"><i class="fa fa-check"></i> <span>انتقل للدفع</span></button>
                </div>
            }
            else
            {
                <p>سلة الشراء فارغة !</p>
            }
        </div>
    </div>

    <script>

    $(".remove-cart").off('click').on('click',function () {
            console.log(this.id);
        $.ajax({
            type: 'post',
            dataType: 'json',
                url: '@Url.Action("Remove", "Cart")',
                data: { 'SkuId': this.id },
                success: function (data) {
                    console.log(data);
                    $('#CartSummary').load('@Url.Action("CartSummary","Cart")');
                    $('#sideCartSummary').load('@Url.Action("CartSummary","Cart",new {sideFlag=true})');
                    //alert(data);
                    var type = (data.Succedeed) ? 'success' : 'error';
                    generateFlash(type, data.Message);
                }
            });
        });
    </script>
